<!DOCTYPE html>
<html lang="id">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <title>Digital Signature - Ivosights</title>
 <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
 <!-- Boxicons -->
 <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
 <link href='https://cdn.boxicons.com/fonts/brands/boxicons-brands.min.css' rel='stylesheet'>
</head>
<!-- Pop Up -->
<div id="popup-modal" tabindex="-1" 
     class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/40 transition-opacity duration-300">
  <div class="relative p-4 w-full max-w-md">
    <!-- CARD PUTIH -->
    <div id="modalCard" 
         class="relative bg-white rounded-2xl shadow-xl transform transition-all duration-300 scale-95 opacity-0">
      <!-- Tombol Close -->
      <button id="closeModalBtn" type="button" 
        class="absolute top-3 right-3 text-gray-400 hover:text-gray-600 rounded-lg text-sm w-8 h-8 flex justify-center items-center">
        <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
        </svg>
        <span class="sr-only">Close modal</span>
      </button>

      <!-- Isi Modal -->
      <div class="p-6 text-center">
        <svg id="modalIcon" class="mx-auto mb-4 w-12 h-12" 
             xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"></svg>
        <h3 id="modalMessage" class="mb-5 text-lg font-semibold text-gray-700"></h3>
        <button id="modalOkBtn" type="button" 
          class="text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none 
                 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5">
          OK
        </button>
      </div>
    </div>
  </div>
</div>
<body class="min-h-screen" style="background: #edf2f7;">
<div class="flex min-h-screen items-center justify-center bg-gray-200">
  <div class="flex flex-col lg:flex-row w-full max-w-5xl bg-white shadow-lg rounded-2xl overflow-hidden">
<!-- Left Pane -->
<div class="flex items-center justify-center flex-1 bg-white text-black p-8">
  <div class="max-w-md text-center">
    <img src="https://raw.githubusercontent.com/AnagaGhaisan/Imageholder/refs/heads/main/ChatGPT%20Image%20Aug%2020%2C%202025%2C%2011_29_07%20AM%20(1).webp" 
         alt="Placeholder Image" 
         class="w-full max-w-sm mx-auto">
  </div>
</div>

    <!-- Right Pane -->
    <div class="w-full lg:w-1/2 flex items-center justify-center bg-gray-100">
      <div class="max-w-md w-full p-6">
        <h1 class="text-3xl font-semibold mb-6 text-black text-center">Digital Signature - Ivosights</h1>
        <h1 class="text-sm font-semibold mb-6 text-gray-500 text-center">Fill The Form To Continue </h1>
        
        <form id="signupForm" action="#" method="POST" class="space-y-4">
          <!-- Name -->
          <div class="space-x-2 mb-6 relative flex items-center">
            <i class='bx bx-user text-black'></i> 
            <input
              type="text" 
              id="name" 
              required
              placeholder=""
              class="border rounded-lg pl-2 pr-3 py-2 text-sm w-full bg-gray-700 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors focus:outline-none peer"
            />
            <label
              for="name"
              class="absolute -top-5 left-10 text-xs text-white cursor-text peer-focus:text-xs peer-focus:-top-5 transition-all peer-focus:text-blue-700 peer-placeholder-shown:top-2 peer-placeholder-shown:text-sm"
            >
              Name
            </label>
          </div>

          
          <!-- Role -->
          <div class="space-x-2 mb-6 relative flex items-center">
            <i class='bx bx-gear'></i>  
            <input
              type="text" 
              id="role" 
              required
              placeholder=""
              class="border rounded-lg pl-2 pr-3 py-2 text-sm w-full bg-gray-700 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors focus:outline-none peer"
            />
            <label
              for="role"
              class="absolute -top-5 left-10 text-xs text-white cursor-text peer-focus:text-xs peer-focus:-top-5 transition-all peer-focus:text-blue-700 peer-placeholder-shown:top-2 peer-placeholder-shown:text-sm"
            >
              Role
            </label>
          </div>
          <!-- Doc ID -->
          <div class="space-x-2 mb-6 relative flex items-center">
            <i class='bx bx-list-ul'></i> 
            <input
              type="text" 
              id="docId" 
              required
              placeholder=""
              class="border rounded-lg pl-2 pr-3 py-2 text-sm w-full bg-gray-700 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors focus:outline-none peer"
            />
            <label
              for="docId"
              class="absolute -top-5 left-10 text-xs text-white cursor-text peer-focus:text-xs peer-focus:-top-5 transition-all peer-focus:text-blue-700 peer-placeholder-shown:top-2 peer-placeholder-shown:text-sm"
            >
              Document ID
            </label>
          </div>
          <!-- Doc Name -->
          <div class="space-x-2 mb-6 relative flex items-center">
            <i class='bx bx-form'></i>
            <input
              type="text" 
              id="docName" 
              required
              placeholder=""
              class="border rounded-lg pl-2 pr-3 py-2 text-sm w-full bg-gray-700 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors focus:outline-none peer"
            />
            <label
              for="docName"
              class="absolute -top-5 left-10 text-xs text-white cursor-text peer-focus:text-xs peer-focus:-top-5 transition-all peer-focus:text-blue-700 peer-placeholder-shown:top-2 peer-placeholder-shown:text-sm"
            >
              Document Name
            </label>
          </div>
          <!-- CC Email -->
          <div class="space-x-2 mb-6 relative flex items-center">
            <i class='bx bx-user-id-card'></i> 
            <input
              type="email" 
              id="ccEmail" 
              placeholder=""
              class="border rounded-lg pl-2 pr-3 py-2 text-sm w-full bg-gray-700 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors focus:outline-none peer"
            />
            <label
              for="ccEmail"
              class="absolute -top-5 left-10 text-xs text-white cursor-text peer-focus:text-xs peer-focus:-top-5 transition-all peer-focus:text-blue-700 peer-placeholder-shown:top-2 peer-placeholder-shown:text-sm"
            >
              CC Email (optional)
            </label>
          </div>
          <p class="text-xs text-gray-500 text-center mb-4">
            Logged in as: <b><?= userEmail ?></b>
          </p>

          <button
            type="submit"
            class="py-2 px-4 bg-blue-600 hover:bg-slate-700 focus:ring-blue-500 focus:ring-offset-blue-200 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg"
          >
            Submit
          </button>
        </form>

        <div id="message" class="mt-4"></div>
      </div>
    </div>
  </div>
</div>
</body>
<script>
 const modal = document.getElementById("popup-modal");
  const modalCard = document.getElementById("modalCard");
  const modalMsg = document.getElementById("modalMessage");
  const modalIcon = document.getElementById("modalIcon");
  const closeModalBtn = document.getElementById("closeModalBtn");
  const modalOkBtn = document.getElementById("modalOkBtn");

  function showModal(type, message) {
    modal.classList.remove("hidden");
    // Delay biar animasi bisa jalan
    setTimeout(() => {
      modalCard.classList.remove("scale-95", "opacity-0");
      modalCard.classList.add("scale-100", "opacity-100");
    }, 50);

    if (type === "success") {
      modalIcon.innerHTML = `<path stroke="green" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l3 3 7-7"/>`;
      modalMsg.textContent = "✅ " + message;
    } else {
      modalIcon.innerHTML = `<path stroke="red" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>`;
      modalMsg.textContent = "❌ " + message;
    }
  }

  function hideModal() {
    // animasi keluar
    modalCard.classList.remove("scale-100", "opacity-100");
    modalCard.classList.add("scale-95", "opacity-0");
    setTimeout(() => modal.classList.add("hidden"), 250); // tunggu transisi selesai
  }

  closeModalBtn.addEventListener("click", hideModal);
  modalOkBtn.addEventListener("click", hideModal);

  // Ganti handler form
  const form = document.getElementById("signupForm");
  form.addEventListener("submit", function(e) {
    e.preventDefault();
    const data = {
      name: form.name.value,
      role: form.role.value,
      docId: form.docId.value,
      docName: form.docName.value,
      ccEmail: form.ccEmail.value,
      ua: navigator.userAgent
    };

    google.script.run
      .withSuccessHandler(res => {
        if (res.ok) {
          showModal("success", "Digital Signature success! Please check your email.");
          form.reset();
        } else {
          showModal("error", "Failure: " + res.error);
        }
      })
      .withFailureHandler(err => {
        showModal("error", "Error: " + err.message);
      })
      .saveSignupWithQR(data);
  });
</script>
</html>
